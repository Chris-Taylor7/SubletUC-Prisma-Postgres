// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("POSTGRES_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL") // uses a direct connection
}

model User {
  id           String     @id @default(cuid())
  name         String?
  email        String?    @unique
  createdAt    DateTime   @default(now()) @map(name: "created_at")
  updatedAt    DateTime   @updatedAt @map(name: "updated_at")

  // One-to-many relationship: One user can create many listings
  listings     Listing[] 

  // Many-to-many relationship: Favorited listings
  favorited    Listing[]  @relation("UserFavorites")

  @@map(name: "users")
}

model Listing {
  id           String     @id @default(cuid())
  firstName    String
  lastName     String
  address      String

  // Creator of the listing
  user         User       @relation(fields: [userId], references: [id])
  userId       String

  // Users who favorited this listing
  favoritedBy  User[]     @relation("UserFavorites")
}